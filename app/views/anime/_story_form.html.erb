<%
  # ストーリー情報編集フォーム

  directors = Hash.new
  users = User.find_all_enabled()
  users.each do |user|
    directors[user.name] = user.id
  end

  story_statuses = Story.statuses

%>
<div class="control-group">
  <label class="control-label" for="inputTitle">タイトル</label>
  <div class="controls">
    <%= text_field_tag( 'title', @story.title, { :id => 'inputTitle', :class => 'span5' } ) %>
  </div>
</div>
<div class="control-group">
  <label class="control-label" for="inputEpisode">エピソード(何話目か)</label>
  <div class="controls">
    <%= text_field_tag( 'episode', @story.episode, { :id => 'inputEpisode', :class => 'span1' } ) %>
  </div>
</div>
<div class="control-group">
  <label class="control-label" for="inputDirector">監督</label>
  <div class="controls">
    <%= select_tag( 'director_id', options_for_select( directors, @story.director_id ), { :class => 'span3' } ) %>
  </div>
</div>
<div class="control-group">
  <label class="control-label" for="inputDescription">説明</label>
  <div class="controls">
    <%= text_area_tag( 'description', @story.description.gsub( /<br( \/)?>/, "\n" ), { :id => 'inputDescription', :class => 'span12', :rows => 8 } ) %>
  </div>
</div>
<div class="control-group">
  <label class="control-label" for="inputDeadline">締切</label>
  <div class="controls">
    <input type="datetime" name="deadline" class="span4" id="inputDeadline" value="<%= ( @story.deadline != nil ? @story.deadline.strftime( '%Y.%m.%d %H:%M:%S' ) : '' ) %>" placeholder="例: <%= ( DateTime.now + 7 ).strftime( '%Y.%m.%d %H:%M:%S' ) %>" />
  </div>
</div>
<div class="control-group">
  <label class="control-label" for="inputStatus">状態</label>
  <div class="controls">
    <%= select_tag( 'status', options_for_select( story_statuses, :selected => @story.status ), { :class => 'span3', :id => 'inputStatus' } ) %>
  </div>
</div>
